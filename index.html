
<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
        <meta
            name="description"
            content="Documentation for the OpiGo API"
        >
    <title>OpiGo API Reference</title>

    <style media="screen">
      .highlight table td { padding: 5px; }
.highlight table pre { margin: 0; }
.highlight .gh {
  color: #999999;
}
.highlight .sr {
  color: #f6aa11;
}
.highlight .go {
  color: #888888;
}
.highlight .gp {
  color: #555555;
}
.highlight .gs {
}
.highlight .gu {
  color: #aaaaaa;
}
.highlight .nb {
  color: #f6aa11;
}
.highlight .cm {
  color: #75715e;
}
.highlight .cp {
  color: #75715e;
}
.highlight .c1 {
  color: #75715e;
}
.highlight .cs {
  color: #75715e;
}
.highlight .c, .highlight .ch, .highlight .cd, .highlight .cpf {
  color: #75715e;
}
.highlight .err {
  color: #960050;
}
.highlight .gr {
  color: #960050;
}
.highlight .gt {
  color: #960050;
}
.highlight .gd {
  color: #49483e;
}
.highlight .gi {
  color: #49483e;
}
.highlight .ge {
  color: #49483e;
}
.highlight .kc {
  color: #66d9ef;
}
.highlight .kd {
  color: #66d9ef;
}
.highlight .kr {
  color: #66d9ef;
}
.highlight .no {
  color: #66d9ef;
}
.highlight .kt {
  color: #66d9ef;
}
.highlight .mf {
  color: #ae81ff;
}
.highlight .mh {
  color: #ae81ff;
}
.highlight .il {
  color: #ae81ff;
}
.highlight .mi {
  color: #ae81ff;
}
.highlight .mo {
  color: #ae81ff;
}
.highlight .m, .highlight .mb, .highlight .mx {
  color: #ae81ff;
}
.highlight .sc {
  color: #ae81ff;
}
.highlight .se {
  color: #ae81ff;
}
.highlight .ss {
  color: #ae81ff;
}
.highlight .sd {
  color: #e6db74;
}
.highlight .s2 {
  color: #e6db74;
}
.highlight .sb {
  color: #e6db74;
}
.highlight .sh {
  color: #e6db74;
}
.highlight .si {
  color: #e6db74;
}
.highlight .sx {
  color: #e6db74;
}
.highlight .s1 {
  color: #e6db74;
}
.highlight .s, .highlight .sa, .highlight .dl {
  color: #e6db74;
}
.highlight .na {
  color: #a6e22e;
}
.highlight .nc {
  color: #a6e22e;
}
.highlight .nd {
  color: #a6e22e;
}
.highlight .ne {
  color: #a6e22e;
}
.highlight .nf, .highlight .fm {
  color: #a6e22e;
}
.highlight .vc {
  color: #ffffff;
}
.highlight .nn {
  color: #ffffff;
}
.highlight .ni {
  color: #ffffff;
}
.highlight .bp {
  color: #ffffff;
}
.highlight .vg {
  color: #ffffff;
}
.highlight .vi {
  color: #ffffff;
}
.highlight .nv, .highlight .vm {
  color: #ffffff;
}
.highlight .w {
  color: #ffffff;
}
.highlight {
  color: #ffffff;
}
.highlight .n, .highlight .py, .highlight .nx {
  color: #ffffff;
}
.highlight .nl {
  color: #f92672;
}
.highlight .ow {
  color: #f92672;
}
.highlight .nt {
  color: #f92672;
}
.highlight .k, .highlight .kv {
  color: #f92672;
}
.highlight .kn {
  color: #f92672;
}
.highlight .kp {
  color: #f92672;
}
.highlight .o {
  color: #f92672;
}
    </style>
    <style media="print">
      * {
        -webkit-transition:none!important;
        transition:none!important;
      }
      .highlight table td { padding: 5px; }
.highlight table pre { margin: 0; }
.highlight, .highlight .w {
  color: #586e75;
}
.highlight .err {
  color: #002b36;
  background-color: #dc322f;
}
.highlight .c, .highlight .ch, .highlight .cd, .highlight .cm, .highlight .cpf, .highlight .c1, .highlight .cs {
  color: #657b83;
}
.highlight .cp {
  color: #b58900;
}
.highlight .nt {
  color: #b58900;
}
.highlight .o, .highlight .ow {
  color: #93a1a1;
}
.highlight .p, .highlight .pi {
  color: #93a1a1;
}
.highlight .gi {
  color: #859900;
}
.highlight .gd {
  color: #dc322f;
}
.highlight .gh {
  color: #268bd2;
  background-color: #002b36;
  font-weight: bold;
}
.highlight .k, .highlight .kn, .highlight .kp, .highlight .kr, .highlight .kv {
  color: #6c71c4;
}
.highlight .kc {
  color: #cb4b16;
}
.highlight .kt {
  color: #cb4b16;
}
.highlight .kd {
  color: #cb4b16;
}
.highlight .s, .highlight .sb, .highlight .sc, .highlight .dl, .highlight .sd, .highlight .s2, .highlight .sh, .highlight .sx, .highlight .s1 {
  color: #859900;
}
.highlight .sa {
  color: #6c71c4;
}
.highlight .sr {
  color: #2aa198;
}
.highlight .si {
  color: #d33682;
}
.highlight .se {
  color: #d33682;
}
.highlight .nn {
  color: #b58900;
}
.highlight .nc {
  color: #b58900;
}
.highlight .no {
  color: #b58900;
}
.highlight .na {
  color: #268bd2;
}
.highlight .m, .highlight .mb, .highlight .mf, .highlight .mh, .highlight .mi, .highlight .il, .highlight .mo, .highlight .mx {
  color: #859900;
}
.highlight .ss {
  color: #859900;
}
    </style>
    <link href="stylesheets/screen-9c19b03a.css" rel="stylesheet" media="screen" />
    <link href="stylesheets/print-966d6edc.css" rel="stylesheet" media="print" />
      <script src="javascripts/all-024da600.js"></script>

    <script>
      $(function() { setupCodeCopy(); });
    </script>
  </head>

  <body class="index" data-languages="[&quot;ruby&quot;,&quot;python&quot;,&quot;javascript&quot;]">
    <a href="#" id="nav-button">
      <span>
        NAV
        <img src="images/navbar-cad8cdcb.png" alt="" />
      </span>
    </a>
    <div class="toc-wrapper">
      <img src="images/logo-1e815a84.png" class="logo" alt="" />
        <div class="lang-selector">
              <a href="#" data-language-name="ruby">ruby</a>
              <a href="#" data-language-name="python">python</a>
              <a href="#" data-language-name="javascript">javascript</a>
        </div>
        <div class="search">
          <input type="text" class="search" id="input-search" placeholder="Search">
        </div>
        <ul class="search-results"></ul>
      <ul id="toc" class="toc-list-h1">
          <li>
            <a href="#introduction" class="toc-h1 toc-link" data-title="Introduction">Introduction</a>
          </li>
          <li>
            <a href="#base-url" class="toc-h1 toc-link" data-title="Base URL">Base URL</a>
          </li>
          <li>
            <a href="#authentication" class="toc-h1 toc-link" data-title="Authentication">Authentication</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#authenticate-test-examples" class="toc-h2 toc-link" data-title="Authenticate test examples">Authenticate test examples</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#channels" class="toc-h1 toc-link" data-title="Channels">Channels</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#get-all-channels" class="toc-h2 toc-link" data-title="Get All Channels">Get All Channels</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#channel-cards" class="toc-h1 toc-link" data-title="Channel Cards">Channel Cards</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#get-all-cards" class="toc-h2 toc-link" data-title="Get All Cards">Get All Cards</a>
                  </li>
                  <li>
                    <a href="#get-specific-card" class="toc-h2 toc-link" data-title="Get specific card">Get specific card</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#public-cards" class="toc-h1 toc-link" data-title="Public Cards">Public Cards</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#get-all-cards-2" class="toc-h2 toc-link" data-title="Get All Cards">Get All Cards</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#general-informations" class="toc-h1 toc-link" data-title="General Informations">General Informations</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#get-polls" class="toc-h2 toc-link" data-title="Get Polls">Get Polls</a>
                  </li>
                  <li>
                    <a href="#get-posts" class="toc-h2 toc-link" data-title="Get Posts">Get Posts</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#stocks" class="toc-h1 toc-link" data-title="Stocks">Stocks</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#get-trending-stocks" class="toc-h2 toc-link" data-title="Get Trending Stocks">Get Trending Stocks</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#errors" class="toc-h1 toc-link" data-title="Errors">Errors</a>
          </li>
      </ul>
        <ul class="toc-footer">
            <li><a href='#' onclick="alert('Comming soon!');">Request for Key and Secretxs</a></li>
            <li><a href='https://github.com/slatedocs/slate'>Documentation Powered by Slate</a></li>
        </ul>
    </div>
    <div class="page-wrapper">
      <div class="dark-box"></div>
      <div class="content">
        <h1 id='introduction'>Introduction</h1>
<p>Welcome to the OpiGo API! You can use our API to access Marketplace API endpoints, which can get information on various cards like returns and so on.</p>

<p>We have language bindings in Ruby, Python, and JavaScript! You can view code examples in the dark area to the right, and you can switch the programming language of the examples with the tabs in the top right.</p>
<h1 id='base-url'>Base URL</h1>
<p>https://staging.opigo.co.in/marketplace</p>
<h1 id='authentication'>Authentication</h1><h2 id='authenticate-test-examples'>Authenticate test examples</h2>
<p>OpiGo uses API key and secret to allow access to the API. You can request OpiGo to get your personal key and secret.</p>

<p><strong>key</strong>: &quot;xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx&quot;
<br>
<strong>secret</strong>: &quot;xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx&quot;</p>

<aside class="notice">
You must replace <code>key and secret</code> with your personal API key and secret.
</aside>

<blockquote>
<p>To authorize, use this code:</p>
</blockquote>
<div class="highlight"><pre class="highlight ruby tab-ruby"><code>
<span class="nb">require</span> <span class="s1">'json'</span>
<span class="nb">require</span> <span class="s1">'http'</span>
<span class="nb">require</span> <span class="s1">'openssl'</span>

<span class="n">secret</span> <span class="o">=</span> <span class="s2">"xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"</span>
<span class="n">key</span> <span class="o">=</span> <span class="s2">"xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"</span>
<span class="n">base_url</span> <span class="o">=</span> <span class="s2">"https://staging.opigo.co.in/marketplace"</span>

<span class="n">payload</span> <span class="o">=</span> <span class="p">{</span>
  <span class="s2">"timestamp"</span><span class="p">:</span> <span class="no">Time</span><span class="p">.</span><span class="nf">new</span><span class="p">.</span><span class="nf">to_i</span>
<span class="p">}</span>

<span class="n">signature</span> <span class="o">=</span> <span class="no">OpenSSL</span><span class="o">::</span><span class="no">HMAC</span><span class="p">.</span><span class="nf">hexdigest</span><span class="p">(</span><span class="no">OpenSSL</span><span class="o">::</span><span class="no">Digest</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="s1">'sha256'</span><span class="p">),</span> <span class="n">secret</span><span class="p">,</span> <span class="n">payload</span><span class="p">.</span><span class="nf">to_json</span><span class="p">)</span>

<span class="n">response</span> <span class="o">=</span> <span class="no">HTTP</span><span class="p">.</span><span class="nf">headers</span><span class="p">(</span><span class="s2">"Content-Type"</span><span class="o">=&gt;</span> <span class="s2">"Application/json"</span><span class="p">,</span> <span class="s2">"X-AUTH-APIKEY"</span> <span class="o">=&gt;</span> <span class="n">key</span><span class="p">,</span> <span class="s2">"X-AUTH-SIGNATURE"</span> <span class="o">=&gt;</span> <span class="n">signature</span><span class="p">).</span><span class="nf">post</span><span class="p">(</span><span class="s2">"</span><span class="si">#{</span><span class="n">base_url</span><span class="si">}</span><span class="s2">/api/v1/cards/get_cards"</span><span class="p">,</span> <span class="ss">json: </span><span class="n">payload</span><span class="p">)</span>

<span class="n">response_body</span> <span class="o">=</span> <span class="no">JSON</span><span class="p">.</span><span class="nf">parse</span> <span class="n">response</span><span class="p">.</span><span class="nf">body</span>
</code></pre></div>
<blockquote>
<p>The above command returns JSON structured like this:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="nl">"message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"success"</span><span class="p">,</span><span class="w"> </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="mi">200</span><span class="p">,</span><span class="w"> </span><span class="nl">"code"</span><span class="p">:</span><span class="w"> </span><span class="mi">200</span><span class="p">}</span><span class="w">
</span></code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="c1"># python3
</span>
<span class="kn">import</span> <span class="nn">hmac</span>
<span class="kn">import</span> <span class="nn">hashlib</span>
<span class="kn">import</span> <span class="nn">base64</span>
<span class="kn">import</span> <span class="nn">json</span>
<span class="kn">import</span> <span class="nn">time</span>
<span class="kn">import</span> <span class="nn">requests</span>

<span class="n">key</span> <span class="o">=</span> <span class="s">"xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"</span>
<span class="n">secret</span> <span class="o">=</span> <span class="s">"xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"</span>
<span class="n">base_url</span> <span class="o">=</span> <span class="s">"https://staging.opigo.co.in/marketplace"</span>


<span class="n">secret_bytes</span> <span class="o">=</span> <span class="nb">bytes</span><span class="p">(</span><span class="n">secret</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s">'utf-8'</span><span class="p">)</span>

<span class="n">timeStamp</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="nb">round</span><span class="p">(</span><span class="n">time</span><span class="p">.</span><span class="n">time</span><span class="p">()</span> <span class="o">*</span> <span class="mi">1000</span><span class="p">))</span>

<span class="n">body</span> <span class="o">=</span> <span class="p">{</span>
  <span class="s">"timestamp"</span><span class="p">:</span> <span class="n">timeStamp</span>
<span class="p">}</span>

<span class="n">json_body</span> <span class="o">=</span> <span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">body</span><span class="p">,</span> <span class="n">separators</span> <span class="o">=</span> <span class="p">(</span><span class="s">','</span><span class="p">,</span> <span class="s">':'</span><span class="p">))</span>

<span class="n">signature</span> <span class="o">=</span> <span class="n">hmac</span><span class="p">.</span><span class="n">new</span><span class="p">(</span><span class="n">secret_bytes</span><span class="p">,</span> <span class="n">json_body</span><span class="p">.</span><span class="n">encode</span><span class="p">(),</span> <span class="n">hashlib</span><span class="p">.</span><span class="n">sha256</span><span class="p">).</span><span class="n">hexdigest</span><span class="p">()</span>

<span class="n">url</span> <span class="o">=</span> <span class="n">base_url</span> <span class="o">+</span> <span class="s">"/api/v1/data/test"</span>

<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">'Content-Type'</span><span class="p">:</span> <span class="s">'application/json'</span><span class="p">,</span>
    <span class="s">'X-AUTH-APIKEY'</span><span class="p">:</span> <span class="n">key</span><span class="p">,</span>
    <span class="s">'X-AUTH-SIGNATURE'</span><span class="p">:</span> <span class="n">signature</span>
<span class="p">}</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="n">post</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">data</span> <span class="o">=</span> <span class="n">json_body</span><span class="p">,</span> <span class="n">headers</span> <span class="o">=</span> <span class="n">headers</span><span class="p">)</span>
<span class="n">data</span> <span class="o">=</span> <span class="n">response</span><span class="p">.</span><span class="n">json</span><span class="p">()</span>
<span class="k">print</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code>
<span class="kd">const</span> <span class="nx">request</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">request</span><span class="dl">'</span><span class="p">)</span>
<span class="kd">const</span> <span class="nx">crypto</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">crypto</span><span class="dl">'</span><span class="p">)</span>

<span class="kd">const</span> <span class="nx">base_url</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">https://staging.opigo.co.in/marketplace</span><span class="dl">"</span>

<span class="kd">const</span> <span class="nx">timeStamp</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">floor</span><span class="p">(</span><span class="nb">Date</span><span class="p">.</span><span class="nx">now</span><span class="p">());</span>

<span class="kd">const</span> <span class="nx">key</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx</span><span class="dl">"</span><span class="p">;</span>
<span class="kd">const</span> <span class="nx">secret</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx</span><span class="dl">"</span><span class="p">;</span>


<span class="kd">const</span> <span class="nx">body</span> <span class="o">=</span> <span class="p">{</span>
  <span class="dl">"</span><span class="s2">timestamp</span><span class="dl">"</span><span class="p">:</span> <span class="nx">timeStamp</span>
<span class="p">}</span>

<span class="kd">const</span> <span class="nx">payload</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Buffer</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">body</span><span class="p">)).</span><span class="nx">toString</span><span class="p">();</span>
<span class="kd">const</span> <span class="nx">signature</span> <span class="o">=</span> <span class="nx">crypto</span><span class="p">.</span><span class="nx">createHmac</span><span class="p">(</span><span class="dl">'</span><span class="s1">sha256</span><span class="dl">'</span><span class="p">,</span> <span class="nx">secret</span><span class="p">).</span><span class="nx">update</span><span class="p">(</span><span class="nx">payload</span><span class="p">).</span><span class="nx">digest</span><span class="p">(</span><span class="dl">'</span><span class="s1">hex</span><span class="dl">'</span><span class="p">)</span>

<span class="kd">const</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">url</span><span class="p">:</span> <span class="nx">base_url</span> <span class="o">+</span> <span class="dl">"</span><span class="s2">/api/v1/data/test</span><span class="dl">"</span><span class="p">,</span>
  <span class="na">headers</span><span class="p">:</span> <span class="p">{</span>
      <span class="dl">'</span><span class="s1">X-AUTH-APIKEY</span><span class="dl">'</span><span class="p">:</span> <span class="nx">key</span><span class="p">,</span>
      <span class="dl">'</span><span class="s1">X-AUTH-SIGNATURE</span><span class="dl">'</span><span class="p">:</span> <span class="nx">signature</span>
  <span class="p">},</span>
  <span class="na">json</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
  <span class="na">body</span><span class="p">:</span> <span class="nx">body</span>
<span class="p">}</span>

<span class="nx">request</span><span class="p">.</span><span class="nx">post</span><span class="p">(</span><span class="nx">options</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">error</span><span class="p">,</span> <span class="nx">response</span><span class="p">,</span> <span class="nx">body</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">body</span><span class="p">);</span>
<span class="p">});</span>
</code></pre></div>
<p>This endpoint to test your implementation is working or not.</p>
<h3 id='http-request'>HTTP Request</h3>
<p><code>POST base_url + /api/v1/data/test</code></p>
<h3 id='query-parameters'>Query Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>timestamp</td>
<td>true</td>
<td>You can&#39;t send the body empty</td>
</tr>
</tbody></table>

<aside class="success">
Remember — Please remember to send timestamp
</aside>
<h1 id='channels'>Channels</h1><h2 id='get-all-channels'>Get All Channels</h2><div class="highlight"><pre class="highlight ruby tab-ruby"><code>
<span class="nb">require</span> <span class="s1">'json'</span>
<span class="nb">require</span> <span class="s1">'http'</span>
<span class="nb">require</span> <span class="s1">'openssl'</span>

<span class="n">secret</span> <span class="o">=</span> <span class="s2">"xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"</span>
<span class="n">key</span> <span class="o">=</span> <span class="s2">"xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"</span>
<span class="n">base_url</span> <span class="o">=</span> <span class="s2">"https://staging.opigo.co.in/marketplace"</span>

<span class="n">payload</span> <span class="o">=</span> <span class="p">{</span>
  <span class="s2">"timestamp"</span><span class="p">:</span> <span class="no">Time</span><span class="p">.</span><span class="nf">new</span><span class="p">.</span><span class="nf">to_i</span><span class="p">,</span>
<span class="p">}</span>

<span class="n">signature</span> <span class="o">=</span> <span class="no">OpenSSL</span><span class="o">::</span><span class="no">HMAC</span><span class="p">.</span><span class="nf">hexdigest</span><span class="p">(</span><span class="no">OpenSSL</span><span class="o">::</span><span class="no">Digest</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="s1">'sha256'</span><span class="p">),</span> <span class="n">secret</span><span class="p">,</span> <span class="n">payload</span><span class="p">.</span><span class="nf">to_json</span><span class="p">)</span>

<span class="n">response</span> <span class="o">=</span> <span class="no">HTTP</span><span class="p">.</span><span class="nf">headers</span><span class="p">(</span><span class="s2">"Content-Type"</span><span class="o">=&gt;</span> <span class="s2">"Application/json"</span><span class="p">,</span> <span class="s2">"X-AUTH-APIKEY"</span> <span class="o">=&gt;</span> <span class="n">key</span><span class="p">,</span> <span class="s2">"X-AUTH-SIGNATURE"</span> <span class="o">=&gt;</span> <span class="n">signature</span><span class="p">).</span><span class="nf">post</span><span class="p">(</span><span class="s2">"</span><span class="si">#{</span><span class="n">base_url</span><span class="si">}</span><span class="s2">/api/v1/data/channels"</span><span class="p">,</span> <span class="ss">json: </span><span class="n">payload</span><span class="p">)</span>

<span class="n">response_body</span> <span class="o">=</span> <span class="no">JSON</span><span class="p">.</span><span class="nf">parse</span> <span class="n">response</span><span class="p">.</span><span class="nf">body</span>
</code></pre></div>
<blockquote>
<p>The above command returns JSON structured like this:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">[{</span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"158760cf-2bba-4be4-b0f2-fd2bdc221c3e"</span><span class="p">,</span><span class="w"> </span><span class="nl">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"General"</span><span class="p">,</span><span class="w"> </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"This is general channel"</span><span class="p">,</span><span class="w"> </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"active"</span><span class="p">,</span><span class="w"> </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2023-10-10T14:16:34.866+05:30"</span><span class="p">,</span><span class="w"> </span><span class="nl">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2023-10-10T14:16:34.866+05:30"</span><span class="p">,</span><span class="w"> </span><span class="nl">"subscriptions"</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0e50508a-ae23-40ae-8773-c1f833e1f6dc"</span><span class="p">,</span><span class="w"> </span><span class="nl">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"General"</span><span class="p">,</span><span class="w"> </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w"> </span><span class="nl">"channel_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"158760cf-2bba-4be4-b0f2-fd2bdc221c3e"</span><span class="p">,</span><span class="w"> </span><span class="nl">"num_of_cards"</span><span class="p">:</span><span class="w"> </span><span class="mi">5</span><span class="p">,</span><span class="w"> </span><span class="nl">"price"</span><span class="p">:</span><span class="w"> </span><span class="s2">"20.7"</span><span class="p">,</span><span class="w"> </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"active"</span><span class="p">,</span><span class="w"> </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2023-10-10T14:16:47.936+05:30"</span><span class="p">,</span><span class="w"> </span><span class="nl">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2024-01-17T14:16:51.506+05:30"</span><span class="p">}]},</span><span class="w"> </span><span class="p">{</span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"df11f3a5-da5c-4fcc-b00b-4ffbcb029bc4"</span><span class="p">,</span><span class="w"> </span><span class="nl">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Long Term"</span><span class="p">,</span><span class="w"> </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"this is long term channel"</span><span class="p">,</span><span class="w"> </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"active"</span><span class="p">,</span><span class="w"> </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2023-10-10T16:21:53.480+05:30"</span><span class="p">,</span><span class="w"> </span><span class="nl">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2023-10-10T16:21:53.480+05:30"</span><span class="p">,</span><span class="w"> </span><span class="nl">"subscriptions"</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bcd9afe6-7aa7-4420-828e-796d06c6a550"</span><span class="p">,</span><span class="w"> </span><span class="nl">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Long Term"</span><span class="p">,</span><span class="w"> </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"this is just a test"</span><span class="p">,</span><span class="w"> </span><span class="nl">"channel_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"df11f3a5-da5c-4fcc-b00b-4ffbcb029bc4"</span><span class="p">,</span><span class="w"> </span><span class="nl">"num_of_cards"</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="w"> </span><span class="nl">"price"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1.0"</span><span class="p">,</span><span class="w"> </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"active"</span><span class="p">,</span><span class="w"> </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2023-10-10T16:22:17.528+05:30"</span><span class="p">,</span><span class="w"> </span><span class="nl">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2024-01-26T12:27:03.744+05:30"</span><span class="p">}]},</span><span class="w"> </span><span class="p">{</span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0c3248b8-2d7d-4b90-851a-686197a01efd"</span><span class="p">,</span><span class="w"> </span><span class="nl">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Medium Term"</span><span class="p">,</span><span class="w"> </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Medium Term"</span><span class="p">,</span><span class="w"> </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"active"</span><span class="p">,</span><span class="w"> </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2023-12-07T08:16:32.449+05:30"</span><span class="p">,</span><span class="w"> </span><span class="nl">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2023-12-07T08:16:32.449+05:30"</span><span class="p">,</span><span class="w"> </span><span class="nl">"subscriptions"</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ad8fa9b0-722b-43f9-a6df-69e4e0cc1761"</span><span class="p">,</span><span class="w"> </span><span class="nl">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Medium Term"</span><span class="p">,</span><span class="w"> </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Medium Term"</span><span class="p">,</span><span class="w"> </span><span class="nl">"channel_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0c3248b8-2d7d-4b90-851a-686197a01efd"</span><span class="p">,</span><span class="w"> </span><span class="nl">"num_of_cards"</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="w"> </span><span class="nl">"price"</span><span class="p">:</span><span class="w"> </span><span class="s2">"500.0"</span><span class="p">,</span><span class="w"> </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"active"</span><span class="p">,</span><span class="w"> </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2024-01-10T17:35:57.727+05:30"</span><span class="p">,</span><span class="w"> </span><span class="nl">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2024-01-10T17:35:57.727+05:30"</span><span class="p">}]}]</span><span class="w">
</span></code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code>
<span class="c1"># python3
</span>
<span class="kn">import</span> <span class="nn">hmac</span>
<span class="kn">import</span> <span class="nn">hashlib</span>
<span class="kn">import</span> <span class="nn">base64</span>
<span class="kn">import</span> <span class="nn">json</span>
<span class="kn">import</span> <span class="nn">time</span>
<span class="kn">import</span> <span class="nn">requests</span>

<span class="n">key</span> <span class="o">=</span> <span class="s">"xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"</span>
<span class="n">secret</span> <span class="o">=</span> <span class="s">"xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"</span>
<span class="n">base_url</span> <span class="o">=</span> <span class="s">"https://staging.opigo.co.in/marketplace"</span>


<span class="n">secret_bytes</span> <span class="o">=</span> <span class="nb">bytes</span><span class="p">(</span><span class="n">secret</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s">'utf-8'</span><span class="p">)</span>

<span class="n">timeStamp</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="nb">round</span><span class="p">(</span><span class="n">time</span><span class="p">.</span><span class="n">time</span><span class="p">()</span> <span class="o">*</span> <span class="mi">1000</span><span class="p">))</span>

<span class="n">body</span> <span class="o">=</span> <span class="p">{</span>
  <span class="s">"timestamp"</span><span class="p">:</span> <span class="n">timeStamp</span>
<span class="p">}</span>

<span class="n">json_body</span> <span class="o">=</span> <span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">body</span><span class="p">,</span> <span class="n">separators</span> <span class="o">=</span> <span class="p">(</span><span class="s">','</span><span class="p">,</span> <span class="s">':'</span><span class="p">))</span>

<span class="n">signature</span> <span class="o">=</span> <span class="n">hmac</span><span class="p">.</span><span class="n">new</span><span class="p">(</span><span class="n">secret_bytes</span><span class="p">,</span> <span class="n">json_body</span><span class="p">.</span><span class="n">encode</span><span class="p">(),</span> <span class="n">hashlib</span><span class="p">.</span><span class="n">sha256</span><span class="p">).</span><span class="n">hexdigest</span><span class="p">()</span>

<span class="n">url</span> <span class="o">=</span> <span class="n">base_url</span> <span class="o">+</span> <span class="s">"/api/v1/data/channels"</span>

<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">'Content-Type'</span><span class="p">:</span> <span class="s">'application/json'</span><span class="p">,</span>
    <span class="s">'X-AUTH-APIKEY'</span><span class="p">:</span> <span class="n">key</span><span class="p">,</span>
    <span class="s">'X-AUTH-SIGNATURE'</span><span class="p">:</span> <span class="n">signature</span>
<span class="p">}</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="n">post</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">data</span> <span class="o">=</span> <span class="n">json_body</span><span class="p">,</span> <span class="n">headers</span> <span class="o">=</span> <span class="n">headers</span><span class="p">)</span>
<span class="n">data</span> <span class="o">=</span> <span class="n">response</span><span class="p">.</span><span class="n">json</span><span class="p">()</span>
<span class="k">print</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code>
<span class="kd">const</span> <span class="nx">request</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">request</span><span class="dl">'</span><span class="p">)</span>
<span class="kd">const</span> <span class="nx">crypto</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">crypto</span><span class="dl">'</span><span class="p">)</span>

<span class="kd">const</span> <span class="nx">base_url</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">https://staging.opigo.co.in/marketplace</span><span class="dl">"</span>

<span class="kd">const</span> <span class="nx">timeStamp</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">floor</span><span class="p">(</span><span class="nb">Date</span><span class="p">.</span><span class="nx">now</span><span class="p">());</span>

<span class="kd">const</span> <span class="nx">key</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx</span><span class="dl">"</span><span class="p">;</span>
<span class="kd">const</span> <span class="nx">secret</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx</span><span class="dl">"</span><span class="p">;</span>


<span class="kd">const</span> <span class="nx">body</span> <span class="o">=</span> <span class="p">{</span>
  <span class="dl">"</span><span class="s2">timestamp</span><span class="dl">"</span><span class="p">:</span> <span class="nx">timeStamp</span>
<span class="p">}</span>

<span class="kd">const</span> <span class="nx">payload</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Buffer</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">body</span><span class="p">)).</span><span class="nx">toString</span><span class="p">();</span>
<span class="kd">const</span> <span class="nx">signature</span> <span class="o">=</span> <span class="nx">crypto</span><span class="p">.</span><span class="nx">createHmac</span><span class="p">(</span><span class="dl">'</span><span class="s1">sha256</span><span class="dl">'</span><span class="p">,</span> <span class="nx">secret</span><span class="p">).</span><span class="nx">update</span><span class="p">(</span><span class="nx">payload</span><span class="p">).</span><span class="nx">digest</span><span class="p">(</span><span class="dl">'</span><span class="s1">hex</span><span class="dl">'</span><span class="p">)</span>

<span class="kd">const</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">url</span><span class="p">:</span> <span class="nx">base_url</span> <span class="o">+</span> <span class="dl">"</span><span class="s2">/api/v1/data/channels</span><span class="dl">"</span><span class="p">,</span>
  <span class="na">headers</span><span class="p">:</span> <span class="p">{</span>
      <span class="dl">'</span><span class="s1">X-AUTH-APIKEY</span><span class="dl">'</span><span class="p">:</span> <span class="nx">key</span><span class="p">,</span>
      <span class="dl">'</span><span class="s1">X-AUTH-SIGNATURE</span><span class="dl">'</span><span class="p">:</span> <span class="nx">signature</span>
  <span class="p">},</span>
  <span class="na">json</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
  <span class="na">body</span><span class="p">:</span> <span class="nx">body</span>
<span class="p">}</span>

<span class="nx">request</span><span class="p">.</span><span class="nx">post</span><span class="p">(</span><span class="nx">options</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">error</span><span class="p">,</span> <span class="nx">response</span><span class="p">,</span> <span class="nx">body</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">body</span><span class="p">);</span>
<span class="p">});</span>
</code></pre></div>
<p>This endpoint retrieves all channels.</p>
<h3 id='http-request-2'>HTTP Request</h3>
<p><code>POST base_url + /api/v1/data/channels</code></p>
<h3 id='query-parameters-2'>Query Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>timestamp</td>
<td>true</td>
<td>You can&#39;t send the body empty</td>
</tr>
</tbody></table>

<aside class="success">
Remember — Please remember to send timestamp
</aside>
<h1 id='channel-cards'>Channel Cards</h1><h2 id='get-all-cards'>Get All Cards</h2><div class="highlight"><pre class="highlight ruby tab-ruby"><code>
<span class="nb">require</span> <span class="s1">'json'</span>
<span class="nb">require</span> <span class="s1">'http'</span>
<span class="nb">require</span> <span class="s1">'openssl'</span>

<span class="n">secret</span> <span class="o">=</span> <span class="s2">"xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"</span>
<span class="n">key</span> <span class="o">=</span> <span class="s2">"xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"</span>
<span class="n">base_url</span> <span class="o">=</span> <span class="s2">"https://staging.opigo.co.in/marketplace"</span>

<span class="n">payload</span> <span class="o">=</span> <span class="p">{</span>
  <span class="s2">"timestamp"</span><span class="p">:</span> <span class="no">Time</span><span class="p">.</span><span class="nf">new</span><span class="p">.</span><span class="nf">to_i</span><span class="p">,</span>
  <span class="s2">"channels"</span><span class="p">:</span> <span class="s2">"General,Medium Term"</span>
<span class="p">}</span>

<span class="n">signature</span> <span class="o">=</span> <span class="no">OpenSSL</span><span class="o">::</span><span class="no">HMAC</span><span class="p">.</span><span class="nf">hexdigest</span><span class="p">(</span><span class="no">OpenSSL</span><span class="o">::</span><span class="no">Digest</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="s1">'sha256'</span><span class="p">),</span> <span class="n">secret</span><span class="p">,</span> <span class="n">payload</span><span class="p">.</span><span class="nf">to_json</span><span class="p">)</span>

<span class="n">response</span> <span class="o">=</span> <span class="no">HTTP</span><span class="p">.</span><span class="nf">headers</span><span class="p">(</span><span class="s2">"Content-Type"</span><span class="o">=&gt;</span> <span class="s2">"Application/json"</span><span class="p">,</span> <span class="s2">"X-AUTH-APIKEY"</span> <span class="o">=&gt;</span> <span class="n">key</span><span class="p">,</span> <span class="s2">"X-AUTH-SIGNATURE"</span> <span class="o">=&gt;</span> <span class="n">signature</span><span class="p">).</span><span class="nf">post</span><span class="p">(</span><span class="s2">"</span><span class="si">#{</span><span class="n">base_url</span><span class="si">}</span><span class="s2">/api/v1/cards/get_cards"</span><span class="p">,</span> <span class="ss">json: </span><span class="n">payload</span><span class="p">)</span>

<span class="n">response_body</span> <span class="o">=</span> <span class="no">JSON</span><span class="p">.</span><span class="nf">parse</span> <span class="n">response</span><span class="p">.</span><span class="nf">body</span>
</code></pre></div>
<blockquote>
<p>The above command returns JSON structured like this:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">[{</span><span class="nl">"expert_full_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Sandeep Maurya"</span><span class="p">,</span><span class="w"> </span><span class="nl">"caption"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w"> </span><span class="nl">"expert_view"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Bullish"</span><span class="p">,</span><span class="w"> </span><span class="nl">"timeframe"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Next 1 Week"</span><span class="p">,</span><span class="w"> </span><span class="nl">"potential_range"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Between 5% - 10%"</span><span class="p">,</span><span class="w"> </span><span class="nl">"stock_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"HDFCAMC - HDFCSENSEX"</span><span class="p">,</span><span class="w"> </span><span class="nl">"symbol_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"HDFCSENSEX"</span><span class="p">,</span><span class="w"> </span><span class="nl">"cost_price"</span><span class="p">:</span><span class="w"> </span><span class="s2">"714.51"</span><span class="p">,</span><span class="w"> </span><span class="nl">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"INR"</span><span class="p">,</span><span class="w"> </span><span class="nl">"card_status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"closed"</span><span class="p">,</span><span class="w"> </span><span class="nl">"overdue_status"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w"> </span><span class="nl">"ltp"</span><span class="p">:</span><span class="w"> </span><span class="s2">"777.0"</span><span class="p">,</span><span class="w"> </span><span class="nl">"ltp_timestamp"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="nl">"stock_split_id"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w"> </span><span class="nl">"highest_price_achieved"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.0"</span><span class="p">,</span><span class="w"> </span><span class="nl">"target_range_price"</span><span class="p">:</span><span class="w"> </span><span class="s2">"750.24"</span><span class="p">,</span><span class="w"> </span><span class="nl">"target_achieved_timestamp"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="nl">"pnl"</span><span class="p">:</span><span class="w"> </span><span class="s2">"62.49"</span><span class="p">,</span><span class="w"> </span><span class="nl">"pnl_percentage"</span><span class="p">:</span><span class="w"> </span><span class="s2">"8.74585"</span><span class="p">,</span><span class="w"> </span><span class="nl">"closing_price"</span><span class="p">:</span><span class="w"> </span><span class="s2">"777.0"</span><span class="p">,</span><span class="w"> </span><span class="nl">"closing_price_timestamp"</span><span class="p">:</span><span class="w"> </span><span class="mi">1704977779000</span><span class="p">,</span><span class="w"> </span><span class="nl">"creation_timestamp"</span><span class="p">:</span><span class="w"> </span><span class="mi">1704961716000</span><span class="p">,</span><span class="w"> </span><span class="nl">"updation_timestamp"</span><span class="p">:</span><span class="w"> </span><span class="mi">1704977779000</span><span class="p">}]</span><span class="w">
</span></code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code>
<span class="c1"># python3
</span>
<span class="kn">import</span> <span class="nn">hmac</span>
<span class="kn">import</span> <span class="nn">hashlib</span>
<span class="kn">import</span> <span class="nn">base64</span>
<span class="kn">import</span> <span class="nn">json</span>
<span class="kn">import</span> <span class="nn">time</span>
<span class="kn">import</span> <span class="nn">requests</span>

<span class="n">key</span> <span class="o">=</span> <span class="s">"xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"</span>
<span class="n">secret</span> <span class="o">=</span> <span class="s">"xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"</span>
<span class="n">base_url</span> <span class="o">=</span> <span class="s">"https://staging.opigo.co.in/marketplace"</span>


<span class="n">secret_bytes</span> <span class="o">=</span> <span class="nb">bytes</span><span class="p">(</span><span class="n">secret</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s">'utf-8'</span><span class="p">)</span>

<span class="n">timeStamp</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="nb">round</span><span class="p">(</span><span class="n">time</span><span class="p">.</span><span class="n">time</span><span class="p">()</span> <span class="o">*</span> <span class="mi">1000</span><span class="p">))</span>

<span class="n">body</span> <span class="o">=</span> <span class="p">{</span>
  <span class="s">"timestamp"</span><span class="p">:</span> <span class="n">timeStamp</span>
<span class="p">}</span>

<span class="n">json_body</span> <span class="o">=</span> <span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">body</span><span class="p">,</span> <span class="n">separators</span> <span class="o">=</span> <span class="p">(</span><span class="s">','</span><span class="p">,</span> <span class="s">':'</span><span class="p">))</span>

<span class="n">signature</span> <span class="o">=</span> <span class="n">hmac</span><span class="p">.</span><span class="n">new</span><span class="p">(</span><span class="n">secret_bytes</span><span class="p">,</span> <span class="n">json_body</span><span class="p">.</span><span class="n">encode</span><span class="p">(),</span> <span class="n">hashlib</span><span class="p">.</span><span class="n">sha256</span><span class="p">).</span><span class="n">hexdigest</span><span class="p">()</span>

<span class="n">url</span> <span class="o">=</span> <span class="n">base_url</span> <span class="o">+</span> <span class="s">"/api/v1/cards/get_cards"</span>

<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">'Content-Type'</span><span class="p">:</span> <span class="s">'application/json'</span><span class="p">,</span>
    <span class="s">'X-AUTH-APIKEY'</span><span class="p">:</span> <span class="n">key</span><span class="p">,</span>
    <span class="s">'X-AUTH-SIGNATURE'</span><span class="p">:</span> <span class="n">signature</span>
<span class="p">}</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="n">post</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">data</span> <span class="o">=</span> <span class="n">json_body</span><span class="p">,</span> <span class="n">headers</span> <span class="o">=</span> <span class="n">headers</span><span class="p">)</span>
<span class="n">data</span> <span class="o">=</span> <span class="n">response</span><span class="p">.</span><span class="n">json</span><span class="p">()</span>
<span class="k">print</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code>
<span class="kd">const</span> <span class="nx">request</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">request</span><span class="dl">'</span><span class="p">)</span>
<span class="kd">const</span> <span class="nx">crypto</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">crypto</span><span class="dl">'</span><span class="p">)</span>

<span class="kd">const</span> <span class="nx">key</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx</span><span class="dl">"</span><span class="p">;</span>
<span class="kd">const</span> <span class="nx">secret</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx</span><span class="dl">"</span><span class="p">;</span>
<span class="kd">const</span> <span class="nx">base_url</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">https://staging.opigo.co.in/marketplace</span><span class="dl">"</span>

<span class="kd">const</span> <span class="nx">timeStamp</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">floor</span><span class="p">(</span><span class="nb">Date</span><span class="p">.</span><span class="nx">now</span><span class="p">());</span>

<span class="kd">const</span> <span class="nx">body</span> <span class="o">=</span> <span class="p">{</span>
  <span class="dl">"</span><span class="s2">timestamp</span><span class="dl">"</span><span class="p">:</span> <span class="nx">timeStamp</span>
<span class="p">}</span>

<span class="kd">const</span> <span class="nx">payload</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Buffer</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">body</span><span class="p">)).</span><span class="nx">toString</span><span class="p">();</span>
<span class="kd">const</span> <span class="nx">signature</span> <span class="o">=</span> <span class="nx">crypto</span><span class="p">.</span><span class="nx">createHmac</span><span class="p">(</span><span class="dl">'</span><span class="s1">sha256</span><span class="dl">'</span><span class="p">,</span> <span class="nx">secret</span><span class="p">).</span><span class="nx">update</span><span class="p">(</span><span class="nx">payload</span><span class="p">).</span><span class="nx">digest</span><span class="p">(</span><span class="dl">'</span><span class="s1">hex</span><span class="dl">'</span><span class="p">)</span>

<span class="kd">const</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">url</span><span class="p">:</span> <span class="nx">base_url</span> <span class="o">+</span> <span class="dl">"</span><span class="s2">/api/v1/cards/get_cards</span><span class="dl">"</span><span class="p">,</span>
  <span class="na">headers</span><span class="p">:</span> <span class="p">{</span>
      <span class="dl">'</span><span class="s1">X-AUTH-APIKEY</span><span class="dl">'</span><span class="p">:</span> <span class="nx">key</span><span class="p">,</span>
      <span class="dl">'</span><span class="s1">X-AUTH-SIGNATURE</span><span class="dl">'</span><span class="p">:</span> <span class="nx">signature</span>
  <span class="p">},</span>
  <span class="na">json</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
  <span class="na">body</span><span class="p">:</span> <span class="nx">body</span>
<span class="p">}</span>

<span class="nx">request</span><span class="p">.</span><span class="nx">post</span><span class="p">(</span><span class="nx">options</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">error</span><span class="p">,</span> <span class="nx">response</span><span class="p">,</span> <span class="nx">body</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">body</span><span class="p">);</span>
<span class="p">});</span>
</code></pre></div>
<p>This endpoint retrieves all cards.</p>
<h3 id='http-request-3'>HTTP Request</h3>
<p><code>POST base_url + /api/v1/cards/get_cards</code></p>
<h3 id='query-parameters-3'>Query Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>timestamp</td>
<td>true</td>
<td>You can&#39;t send the body empty</td>
</tr>
<tr>
<td>channels</td>
<td>No.</td>
<td>comma(,) seperated channels for ex channels: &quot;General,Medium Term&quot;</td>
</tr>
</tbody></table>

<aside class="success">
Remember — Please remember to send timestamp
</aside>
<h2 id='get-specific-card'>Get specific card</h2>
<aside class="success">
comming soon
</aside>
<h1 id='public-cards'>Public Cards</h1><h2 id='get-all-cards-2'>Get All Cards</h2><div class="highlight"><pre class="highlight ruby tab-ruby"><code>
<span class="nb">require</span> <span class="s1">'json'</span>
<span class="nb">require</span> <span class="s1">'http'</span>
<span class="nb">require</span> <span class="s1">'openssl'</span>

<span class="n">secret</span> <span class="o">=</span> <span class="s2">"xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"</span>
<span class="n">key</span> <span class="o">=</span> <span class="s2">"xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"</span>
<span class="n">base_url</span> <span class="o">=</span> <span class="s2">"https://staging.opigo.co.in/marketplace"</span>

<span class="n">payload</span> <span class="o">=</span> <span class="p">{</span>
  <span class="s2">"timestamp"</span><span class="p">:</span> <span class="no">Time</span><span class="p">.</span><span class="nf">new</span><span class="p">.</span><span class="nf">to_i</span><span class="p">,</span>
  <span class="s2">"channels"</span><span class="p">:</span> <span class="s2">"General,Medium Term"</span>
<span class="p">}</span>

<span class="n">signature</span> <span class="o">=</span> <span class="no">OpenSSL</span><span class="o">::</span><span class="no">HMAC</span><span class="p">.</span><span class="nf">hexdigest</span><span class="p">(</span><span class="no">OpenSSL</span><span class="o">::</span><span class="no">Digest</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="s1">'sha256'</span><span class="p">),</span> <span class="n">secret</span><span class="p">,</span> <span class="n">payload</span><span class="p">.</span><span class="nf">to_json</span><span class="p">)</span>

<span class="n">response</span> <span class="o">=</span> <span class="no">HTTP</span><span class="p">.</span><span class="nf">headers</span><span class="p">(</span><span class="s2">"Content-Type"</span><span class="o">=&gt;</span> <span class="s2">"Application/json"</span><span class="p">,</span> <span class="s2">"X-AUTH-APIKEY"</span> <span class="o">=&gt;</span> <span class="n">key</span><span class="p">,</span> <span class="s2">"X-AUTH-SIGNATURE"</span> <span class="o">=&gt;</span> <span class="n">signature</span><span class="p">).</span><span class="nf">post</span><span class="p">(</span><span class="s2">"</span><span class="si">#{</span><span class="n">base_url</span><span class="si">}</span><span class="s2">/api/v1/public/cards/get_cards"</span><span class="p">,</span> <span class="ss">json: </span><span class="n">payload</span><span class="p">)</span>

<span class="n">response_body</span> <span class="o">=</span> <span class="no">JSON</span><span class="p">.</span><span class="nf">parse</span> <span class="n">response</span><span class="p">.</span><span class="nf">body</span>
</code></pre></div>
<blockquote>
<p>The above command returns JSON structured like this:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">[{</span><span class="nl">"expert_full_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Sandeep Maurya"</span><span class="p">,</span><span class="w"> </span><span class="nl">"caption"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w"> </span><span class="nl">"expert_view"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Bullish"</span><span class="p">,</span><span class="w"> </span><span class="nl">"timeframe"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Next 1 Week"</span><span class="p">,</span><span class="w"> </span><span class="nl">"potential_range"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Between 5% - 10%"</span><span class="p">,</span><span class="w"> </span><span class="nl">"stock_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"HDFCAMC - HDFCSENSEX"</span><span class="p">,</span><span class="w"> </span><span class="nl">"symbol_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"HDFCSENSEX"</span><span class="p">,</span><span class="w"> </span><span class="nl">"cost_price"</span><span class="p">:</span><span class="w"> </span><span class="s2">"714.51"</span><span class="p">,</span><span class="w"> </span><span class="nl">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"INR"</span><span class="p">,</span><span class="w"> </span><span class="nl">"card_status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"closed"</span><span class="p">,</span><span class="w"> </span><span class="nl">"overdue_status"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w"> </span><span class="nl">"ltp"</span><span class="p">:</span><span class="w"> </span><span class="s2">"777.0"</span><span class="p">,</span><span class="w"> </span><span class="nl">"ltp_timestamp"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="nl">"stock_split_id"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w"> </span><span class="nl">"highest_price_achieved"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.0"</span><span class="p">,</span><span class="w"> </span><span class="nl">"target_range_price"</span><span class="p">:</span><span class="w"> </span><span class="s2">"750.24"</span><span class="p">,</span><span class="w"> </span><span class="nl">"target_achieved_timestamp"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="nl">"pnl"</span><span class="p">:</span><span class="w"> </span><span class="s2">"62.49"</span><span class="p">,</span><span class="w"> </span><span class="nl">"pnl_percentage"</span><span class="p">:</span><span class="w"> </span><span class="s2">"8.74585"</span><span class="p">,</span><span class="w"> </span><span class="nl">"closing_price"</span><span class="p">:</span><span class="w"> </span><span class="s2">"777.0"</span><span class="p">,</span><span class="w"> </span><span class="nl">"closing_price_timestamp"</span><span class="p">:</span><span class="w"> </span><span class="mi">1704977779000</span><span class="p">,</span><span class="w"> </span><span class="nl">"creation_timestamp"</span><span class="p">:</span><span class="w"> </span><span class="mi">1704961716000</span><span class="p">,</span><span class="w"> </span><span class="nl">"updation_timestamp"</span><span class="p">:</span><span class="w"> </span><span class="mi">1704977779000</span><span class="p">}]</span><span class="w">
</span></code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code>
<span class="c1"># python3
</span>
<span class="kn">import</span> <span class="nn">hmac</span>
<span class="kn">import</span> <span class="nn">hashlib</span>
<span class="kn">import</span> <span class="nn">base64</span>
<span class="kn">import</span> <span class="nn">json</span>
<span class="kn">import</span> <span class="nn">time</span>
<span class="kn">import</span> <span class="nn">requests</span>

<span class="n">key</span> <span class="o">=</span> <span class="s">"xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"</span>
<span class="n">secret</span> <span class="o">=</span> <span class="s">"xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"</span>
<span class="n">base_url</span> <span class="o">=</span> <span class="s">"https://staging.opigo.co.in/marketplace"</span>


<span class="n">secret_bytes</span> <span class="o">=</span> <span class="nb">bytes</span><span class="p">(</span><span class="n">secret</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s">'utf-8'</span><span class="p">)</span>

<span class="n">timeStamp</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="nb">round</span><span class="p">(</span><span class="n">time</span><span class="p">.</span><span class="n">time</span><span class="p">()</span> <span class="o">*</span> <span class="mi">1000</span><span class="p">))</span>

<span class="n">body</span> <span class="o">=</span> <span class="p">{</span>
  <span class="s">"timestamp"</span><span class="p">:</span> <span class="n">timeStamp</span>
<span class="p">}</span>

<span class="n">json_body</span> <span class="o">=</span> <span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">body</span><span class="p">,</span> <span class="n">separators</span> <span class="o">=</span> <span class="p">(</span><span class="s">','</span><span class="p">,</span> <span class="s">':'</span><span class="p">))</span>

<span class="n">signature</span> <span class="o">=</span> <span class="n">hmac</span><span class="p">.</span><span class="n">new</span><span class="p">(</span><span class="n">secret_bytes</span><span class="p">,</span> <span class="n">json_body</span><span class="p">.</span><span class="n">encode</span><span class="p">(),</span> <span class="n">hashlib</span><span class="p">.</span><span class="n">sha256</span><span class="p">).</span><span class="n">hexdigest</span><span class="p">()</span>

<span class="n">url</span> <span class="o">=</span> <span class="n">base_url</span> <span class="o">+</span> <span class="s">"/api/v1/public/cards/get_cards"</span>

<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">'Content-Type'</span><span class="p">:</span> <span class="s">'application/json'</span><span class="p">,</span>
    <span class="s">'X-AUTH-APIKEY'</span><span class="p">:</span> <span class="n">key</span><span class="p">,</span>
    <span class="s">'X-AUTH-SIGNATURE'</span><span class="p">:</span> <span class="n">signature</span>
<span class="p">}</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="n">post</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">data</span> <span class="o">=</span> <span class="n">json_body</span><span class="p">,</span> <span class="n">headers</span> <span class="o">=</span> <span class="n">headers</span><span class="p">)</span>
<span class="n">data</span> <span class="o">=</span> <span class="n">response</span><span class="p">.</span><span class="n">json</span><span class="p">()</span>
<span class="k">print</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code>
<span class="kd">const</span> <span class="nx">request</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">request</span><span class="dl">'</span><span class="p">)</span>
<span class="kd">const</span> <span class="nx">crypto</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">crypto</span><span class="dl">'</span><span class="p">)</span>


<span class="kd">const</span> <span class="nx">key</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx</span><span class="dl">"</span><span class="p">;</span>
<span class="kd">const</span> <span class="nx">secret</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx</span><span class="dl">"</span><span class="p">;</span>
<span class="kd">const</span> <span class="nx">base_url</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">https://staging.opigo.co.in/marketplace</span><span class="dl">"</span>

<span class="kd">const</span> <span class="nx">timeStamp</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">floor</span><span class="p">(</span><span class="nb">Date</span><span class="p">.</span><span class="nx">now</span><span class="p">());</span>

<span class="kd">const</span> <span class="nx">body</span> <span class="o">=</span> <span class="p">{</span>
  <span class="dl">"</span><span class="s2">timestamp</span><span class="dl">"</span><span class="p">:</span> <span class="nx">timeStamp</span>
<span class="p">}</span>

<span class="kd">const</span> <span class="nx">payload</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Buffer</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">body</span><span class="p">)).</span><span class="nx">toString</span><span class="p">();</span>
<span class="kd">const</span> <span class="nx">signature</span> <span class="o">=</span> <span class="nx">crypto</span><span class="p">.</span><span class="nx">createHmac</span><span class="p">(</span><span class="dl">'</span><span class="s1">sha256</span><span class="dl">'</span><span class="p">,</span> <span class="nx">secret</span><span class="p">).</span><span class="nx">update</span><span class="p">(</span><span class="nx">payload</span><span class="p">).</span><span class="nx">digest</span><span class="p">(</span><span class="dl">'</span><span class="s1">hex</span><span class="dl">'</span><span class="p">)</span>

<span class="kd">const</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">url</span><span class="p">:</span> <span class="nx">base_url</span> <span class="o">+</span> <span class="dl">"</span><span class="s2">/api/v1/public/cards/get_cards</span><span class="dl">"</span><span class="p">,</span>
  <span class="na">headers</span><span class="p">:</span> <span class="p">{</span>
      <span class="dl">'</span><span class="s1">X-AUTH-APIKEY</span><span class="dl">'</span><span class="p">:</span> <span class="nx">key</span><span class="p">,</span>
      <span class="dl">'</span><span class="s1">X-AUTH-SIGNATURE</span><span class="dl">'</span><span class="p">:</span> <span class="nx">signature</span>
  <span class="p">},</span>
  <span class="na">json</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
  <span class="na">body</span><span class="p">:</span> <span class="nx">body</span>
<span class="p">}</span>

<span class="nx">request</span><span class="p">.</span><span class="nx">post</span><span class="p">(</span><span class="nx">options</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">error</span><span class="p">,</span> <span class="nx">response</span><span class="p">,</span> <span class="nx">body</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">body</span><span class="p">);</span>
<span class="p">});</span>
</code></pre></div>
<p>This endpoint retrieves all cards.</p>
<h3 id='http-request-4'>HTTP Request</h3>
<p><code>POST base_url + /api/v1/public/cards/get_cards</code></p>
<h3 id='query-parameters-4'>Query Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>timestamp</td>
<td>true</td>
<td>You can&#39;t send the body empty</td>
</tr>
<tr>
<td>channels</td>
<td>No.</td>
<td>comma(,) seperated channels for ex channels: &quot;General,Medium Term&quot;</td>
</tr>
</tbody></table>

<aside class="success">
Remember — Please remember to send timestamp
</aside>

<hr>
<h1 id='general-informations'>General Informations</h1><h2 id='get-polls'>Get Polls</h2><div class="highlight"><pre class="highlight ruby tab-ruby"><code>
<span class="nb">require</span> <span class="s1">'json'</span>
<span class="nb">require</span> <span class="s1">'http'</span>
<span class="nb">require</span> <span class="s1">'openssl'</span>

<span class="n">secret</span> <span class="o">=</span> <span class="s2">"xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"</span>
<span class="n">key</span> <span class="o">=</span> <span class="s2">"xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"</span>
<span class="n">base_url</span> <span class="o">=</span> <span class="s2">"https://staging.opigo.co.in/marketplace"</span>

<span class="n">payload</span> <span class="o">=</span> <span class="p">{</span>
  <span class="s2">"timestamp"</span><span class="p">:</span> <span class="no">Time</span><span class="p">.</span><span class="nf">new</span><span class="p">.</span><span class="nf">to_i</span><span class="p">,</span>
<span class="p">}</span>

<span class="n">signature</span> <span class="o">=</span> <span class="no">OpenSSL</span><span class="o">::</span><span class="no">HMAC</span><span class="p">.</span><span class="nf">hexdigest</span><span class="p">(</span><span class="no">OpenSSL</span><span class="o">::</span><span class="no">Digest</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="s1">'sha256'</span><span class="p">),</span> <span class="n">secret</span><span class="p">,</span> <span class="n">payload</span><span class="p">.</span><span class="nf">to_json</span><span class="p">)</span>

<span class="n">response</span> <span class="o">=</span> <span class="no">HTTP</span><span class="p">.</span><span class="nf">headers</span><span class="p">(</span><span class="s2">"Content-Type"</span><span class="o">=&gt;</span> <span class="s2">"Application/json"</span><span class="p">,</span> <span class="s2">"X-AUTH-APIKEY"</span> <span class="o">=&gt;</span> <span class="n">key</span><span class="p">,</span> <span class="s2">"X-AUTH-SIGNATURE"</span> <span class="o">=&gt;</span> <span class="n">signature</span><span class="p">).</span><span class="nf">post</span><span class="p">(</span><span class="s2">"</span><span class="si">#{</span><span class="n">base_url</span><span class="si">}</span><span class="s2">/api/v1/data/polls"</span><span class="p">,</span> <span class="ss">json: </span><span class="n">payload</span><span class="p">)</span>

<span class="n">response_body</span> <span class="o">=</span> <span class="no">JSON</span><span class="p">.</span><span class="nf">parse</span> <span class="n">response</span><span class="p">.</span><span class="nf">body</span>
</code></pre></div>
<blockquote>
<p>The above command returns JSON structured like this:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">[{</span><span class="nl">"account_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">192</span><span class="p">,</span><span class="w"> </span><span class="nl">"account_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Devansh Mehta"</span><span class="p">,</span><span class="w"> </span><span class="nl">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Poll Title"</span><span class="p">,</span><span class="w"> </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w"> </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"finished"</span><span class="p">,</span><span class="w"> </span><span class="nl">"schedule"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w"> </span><span class="nl">"approved_at"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w"> </span><span class="nl">"view_count"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w"> </span><span class="nl">"answer_count"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w"> </span><span class="nl">"poll_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"single_investment"</span><span class="p">,</span><span class="w"> </span><span class="nl">"poll_category_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="nl">"time_frame"</span><span class="p">:</span><span class="w"> </span><span class="s2">"next_1_month"</span><span class="p">,</span><span class="w"> </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="nl">"investment_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"new_investment"</span><span class="p">,</span><span class="w"> </span><span class="nl">"vote_options"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"bullish"</span><span class="p">,</span><span class="w"> </span><span class="s2">"bearish"</span><span class="p">,</span><span class="w"> </span><span class="s2">"neutral"</span><span class="p">]},</span><span class="w"> </span><span class="nl">"question"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w"> </span><span class="nl">"stock_name"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w"> </span><span class="nl">"final_response"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="nl">"bullish"</span><span class="p">:</span><span class="w"> </span><span class="mi">100</span><span class="p">,</span><span class="w"> </span><span class="nl">"bearish"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="nl">"neutral"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">},</span><span class="w"> </span><span class="nl">"new_final_response"</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span><span class="nl">"bullish"</span><span class="p">:</span><span class="w"> </span><span class="mi">100</span><span class="p">},</span><span class="w"> </span><span class="p">{</span><span class="nl">"bearish"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">},</span><span class="w"> </span><span class="p">{</span><span class="nl">"neutral"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">}],</span><span class="w"> </span><span class="nl">"verified_opigo_expert_response"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w"> </span><span class="nl">"total_comment_count"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w"> </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2023-08-04T21:35:36.526+05:30"</span><span class="p">,</span><span class="w"> </span><span class="nl">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2023-08-04T22:45:14.714+05:30"</span><span class="p">}]</span><span class="w">
</span></code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code>
<span class="c1"># python3
</span>
<span class="kn">import</span> <span class="nn">hmac</span>
<span class="kn">import</span> <span class="nn">hashlib</span>
<span class="kn">import</span> <span class="nn">base64</span>
<span class="kn">import</span> <span class="nn">json</span>
<span class="kn">import</span> <span class="nn">time</span>
<span class="kn">import</span> <span class="nn">requests</span>

<span class="n">key</span> <span class="o">=</span> <span class="s">"xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"</span>
<span class="n">secret</span> <span class="o">=</span> <span class="s">"xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"</span>
<span class="n">base_url</span> <span class="o">=</span> <span class="s">"https://staging.opigo.co.in/marketplace"</span>


<span class="n">secret_bytes</span> <span class="o">=</span> <span class="nb">bytes</span><span class="p">(</span><span class="n">secret</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s">'utf-8'</span><span class="p">)</span>

<span class="n">timeStamp</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="nb">round</span><span class="p">(</span><span class="n">time</span><span class="p">.</span><span class="n">time</span><span class="p">()</span> <span class="o">*</span> <span class="mi">1000</span><span class="p">))</span>

<span class="n">body</span> <span class="o">=</span> <span class="p">{</span>
  <span class="s">"timestamp"</span><span class="p">:</span> <span class="n">timeStamp</span>
<span class="p">}</span>

<span class="n">json_body</span> <span class="o">=</span> <span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">body</span><span class="p">,</span> <span class="n">separators</span> <span class="o">=</span> <span class="p">(</span><span class="s">','</span><span class="p">,</span> <span class="s">':'</span><span class="p">))</span>

<span class="n">signature</span> <span class="o">=</span> <span class="n">hmac</span><span class="p">.</span><span class="n">new</span><span class="p">(</span><span class="n">secret_bytes</span><span class="p">,</span> <span class="n">json_body</span><span class="p">.</span><span class="n">encode</span><span class="p">(),</span> <span class="n">hashlib</span><span class="p">.</span><span class="n">sha256</span><span class="p">).</span><span class="n">hexdigest</span><span class="p">()</span>

<span class="n">url</span> <span class="o">=</span> <span class="n">base_url</span> <span class="o">+</span> <span class="s">"/api/v1/data/polls"</span>

<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">'Content-Type'</span><span class="p">:</span> <span class="s">'application/json'</span><span class="p">,</span>
    <span class="s">'X-AUTH-APIKEY'</span><span class="p">:</span> <span class="n">key</span><span class="p">,</span>
    <span class="s">'X-AUTH-SIGNATURE'</span><span class="p">:</span> <span class="n">signature</span>
<span class="p">}</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="n">post</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">data</span> <span class="o">=</span> <span class="n">json_body</span><span class="p">,</span> <span class="n">headers</span> <span class="o">=</span> <span class="n">headers</span><span class="p">)</span>
<span class="n">data</span> <span class="o">=</span> <span class="n">response</span><span class="p">.</span><span class="n">json</span><span class="p">()</span>
<span class="k">print</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code>
<span class="kd">const</span> <span class="nx">request</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">request</span><span class="dl">'</span><span class="p">)</span>
<span class="kd">const</span> <span class="nx">crypto</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">crypto</span><span class="dl">'</span><span class="p">)</span>


<span class="kd">const</span> <span class="nx">key</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx</span><span class="dl">"</span><span class="p">;</span>
<span class="kd">const</span> <span class="nx">secret</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx</span><span class="dl">"</span><span class="p">;</span>
<span class="kd">const</span> <span class="nx">base_url</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">https://staging.opigo.co.in/marketplace</span><span class="dl">"</span>

<span class="kd">const</span> <span class="nx">timeStamp</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">floor</span><span class="p">(</span><span class="nb">Date</span><span class="p">.</span><span class="nx">now</span><span class="p">());</span>

<span class="kd">const</span> <span class="nx">body</span> <span class="o">=</span> <span class="p">{</span>
  <span class="dl">"</span><span class="s2">timestamp</span><span class="dl">"</span><span class="p">:</span> <span class="nx">timeStamp</span>
<span class="p">}</span>

<span class="kd">const</span> <span class="nx">payload</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Buffer</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">body</span><span class="p">)).</span><span class="nx">toString</span><span class="p">();</span>
<span class="kd">const</span> <span class="nx">signature</span> <span class="o">=</span> <span class="nx">crypto</span><span class="p">.</span><span class="nx">createHmac</span><span class="p">(</span><span class="dl">'</span><span class="s1">sha256</span><span class="dl">'</span><span class="p">,</span> <span class="nx">secret</span><span class="p">).</span><span class="nx">update</span><span class="p">(</span><span class="nx">payload</span><span class="p">).</span><span class="nx">digest</span><span class="p">(</span><span class="dl">'</span><span class="s1">hex</span><span class="dl">'</span><span class="p">)</span>

<span class="kd">const</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">url</span><span class="p">:</span> <span class="nx">base_url</span> <span class="o">+</span> <span class="dl">"</span><span class="s2">/api/v1/data/polls</span><span class="dl">"</span><span class="p">,</span>
  <span class="na">headers</span><span class="p">:</span> <span class="p">{</span>
      <span class="dl">'</span><span class="s1">X-AUTH-APIKEY</span><span class="dl">'</span><span class="p">:</span> <span class="nx">key</span><span class="p">,</span>
      <span class="dl">'</span><span class="s1">X-AUTH-SIGNATURE</span><span class="dl">'</span><span class="p">:</span> <span class="nx">signature</span>
  <span class="p">},</span>
  <span class="na">json</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
  <span class="na">body</span><span class="p">:</span> <span class="nx">body</span>
<span class="p">}</span>

<span class="nx">request</span><span class="p">.</span><span class="nx">post</span><span class="p">(</span><span class="nx">options</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">error</span><span class="p">,</span> <span class="nx">response</span><span class="p">,</span> <span class="nx">body</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">body</span><span class="p">);</span>
<span class="p">});</span>
</code></pre></div>
<p>This endpoint retrieves all cards.</p>
<h3 id='http-request-5'>HTTP Request</h3>
<p><code>POST base_url + /api/v1/data/polls</code></p>
<h3 id='query-parameters-5'>Query Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>timestamp</td>
<td>true</td>
<td>You can&#39;t send the body empty</td>
</tr>
</tbody></table>

<aside class="success">
Remember — Please remember to send timestamp
</aside>
<h2 id='get-posts'>Get Posts</h2><div class="highlight"><pre class="highlight ruby tab-ruby"><code>
<span class="nb">require</span> <span class="s1">'json'</span>
<span class="nb">require</span> <span class="s1">'http'</span>
<span class="nb">require</span> <span class="s1">'openssl'</span>

<span class="n">secret</span> <span class="o">=</span> <span class="s2">"xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"</span>
<span class="n">key</span> <span class="o">=</span> <span class="s2">"xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"</span>
<span class="n">base_url</span> <span class="o">=</span> <span class="s2">"https://staging.opigo.co.in/marketplace"</span>

<span class="n">payload</span> <span class="o">=</span> <span class="p">{</span>
  <span class="s2">"timestamp"</span><span class="p">:</span> <span class="no">Time</span><span class="p">.</span><span class="nf">new</span><span class="p">.</span><span class="nf">to_i</span><span class="p">,</span>
  <span class="s2">"channels"</span><span class="p">:</span> <span class="s2">"General,Medium Term"</span>
<span class="p">}</span>

<span class="n">signature</span> <span class="o">=</span> <span class="no">OpenSSL</span><span class="o">::</span><span class="no">HMAC</span><span class="p">.</span><span class="nf">hexdigest</span><span class="p">(</span><span class="no">OpenSSL</span><span class="o">::</span><span class="no">Digest</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="s1">'sha256'</span><span class="p">),</span> <span class="n">secret</span><span class="p">,</span> <span class="n">payload</span><span class="p">.</span><span class="nf">to_json</span><span class="p">)</span>

<span class="n">response</span> <span class="o">=</span> <span class="no">HTTP</span><span class="p">.</span><span class="nf">headers</span><span class="p">(</span><span class="s2">"Content-Type"</span><span class="o">=&gt;</span> <span class="s2">"Application/json"</span><span class="p">,</span> <span class="s2">"X-AUTH-APIKEY"</span> <span class="o">=&gt;</span> <span class="n">key</span><span class="p">,</span> <span class="s2">"X-AUTH-SIGNATURE"</span> <span class="o">=&gt;</span> <span class="n">signature</span><span class="p">).</span><span class="nf">post</span><span class="p">(</span><span class="s2">"</span><span class="si">#{</span><span class="n">base_url</span><span class="si">}</span><span class="s2">/api/v1/data/posts"</span><span class="p">,</span> <span class="ss">json: </span><span class="n">payload</span><span class="p">)</span>

<span class="n">response_body</span> <span class="o">=</span> <span class="no">JSON</span><span class="p">.</span><span class="nf">parse</span> <span class="n">response</span><span class="p">.</span><span class="nf">body</span>
</code></pre></div>
<blockquote>
<p>The above command returns JSON structured like this:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">[{</span><span class="nl">"category"</span><span class="p">:</span><span class="w"> </span><span class="s2">"video"</span><span class="p">,</span><span class="w"> </span><span class="nl">"category_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="nl">"account_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">205</span><span class="p">,</span><span class="w"> </span><span class="nl">"account_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Sandeep Maurya"</span><span class="p">,</span><span class="w"> </span><span class="nl">"caption"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Which stock did you start with in 2024? I began with Dredging Corp of India 🚀"</span><span class="p">,</span><span class="w"> </span><span class="nl">"is_complete"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w"> </span><span class="nl">"resize_mode"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w"> </span><span class="nl">"total_comment_count"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w"> </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2024-01-09T15:53:23.158+05:30"</span><span class="p">,</span><span class="w"> </span><span class="nl">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2024-01-09T15:53:23.158+05:30"</span><span class="p">},</span><span class="w"> </span><span class="p">{</span><span class="nl">"category"</span><span class="p">:</span><span class="w"> </span><span class="s2">"video"</span><span class="p">,</span><span class="w"> </span><span class="nl">"category_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="nl">"account_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">205</span><span class="p">,</span><span class="w"> </span><span class="nl">"account_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Sandeep Maurya"</span><span class="p">,</span><span class="w"> </span><span class="nl">"caption"</span><span class="p">:</span><span class="w"> </span><span class="s2">"This just a test"</span><span class="p">,</span><span class="w"> </span><span class="nl">"is_complete"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w"> </span><span class="nl">"resize_mode"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w"> </span><span class="nl">"total_comment_count"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w"> </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2023-09-29T12:40:40.215+05:30"</span><span class="p">,</span><span class="w"> </span><span class="nl">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2023-09-29T12:40:40.215+05:30"</span><span class="p">},</span><span class="w"> </span><span class="p">{</span><span class="nl">"category"</span><span class="p">:</span><span class="w"> </span><span class="s2">"video"</span><span class="p">,</span><span class="w"> </span><span class="nl">"category_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="nl">"account_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">203</span><span class="p">,</span><span class="w"> </span><span class="nl">"account_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Jzns Hwnz"</span><span class="p">,</span><span class="w"> </span><span class="nl">"caption"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w"> </span><span class="nl">"is_complete"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w"> </span><span class="nl">"resize_mode"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w"> </span><span class="nl">"total_comment_count"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w"> </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2023-09-08T11:07:55.413+05:30"</span><span class="p">,</span><span class="w"> </span><span class="nl">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2023-09-08T11:07:55.413+05:30"</span><span class="p">}]</span><span class="w">
</span></code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code>
<span class="c1"># python3
</span>
<span class="kn">import</span> <span class="nn">hmac</span>
<span class="kn">import</span> <span class="nn">hashlib</span>
<span class="kn">import</span> <span class="nn">base64</span>
<span class="kn">import</span> <span class="nn">json</span>
<span class="kn">import</span> <span class="nn">time</span>
<span class="kn">import</span> <span class="nn">requests</span>

<span class="n">key</span> <span class="o">=</span> <span class="s">"xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"</span>
<span class="n">secret</span> <span class="o">=</span> <span class="s">"xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"</span>
<span class="n">base_url</span> <span class="o">=</span> <span class="s">"https://staging.opigo.co.in/marketplace"</span>


<span class="n">secret_bytes</span> <span class="o">=</span> <span class="nb">bytes</span><span class="p">(</span><span class="n">secret</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s">'utf-8'</span><span class="p">)</span>

<span class="n">timeStamp</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="nb">round</span><span class="p">(</span><span class="n">time</span><span class="p">.</span><span class="n">time</span><span class="p">()</span> <span class="o">*</span> <span class="mi">1000</span><span class="p">))</span>

<span class="n">body</span> <span class="o">=</span> <span class="p">{</span>
  <span class="s">"timestamp"</span><span class="p">:</span> <span class="n">timeStamp</span>
<span class="p">}</span>

<span class="n">json_body</span> <span class="o">=</span> <span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">body</span><span class="p">,</span> <span class="n">separators</span> <span class="o">=</span> <span class="p">(</span><span class="s">','</span><span class="p">,</span> <span class="s">':'</span><span class="p">))</span>

<span class="n">signature</span> <span class="o">=</span> <span class="n">hmac</span><span class="p">.</span><span class="n">new</span><span class="p">(</span><span class="n">secret_bytes</span><span class="p">,</span> <span class="n">json_body</span><span class="p">.</span><span class="n">encode</span><span class="p">(),</span> <span class="n">hashlib</span><span class="p">.</span><span class="n">sha256</span><span class="p">).</span><span class="n">hexdigest</span><span class="p">()</span>

<span class="n">url</span> <span class="o">=</span> <span class="n">base_url</span> <span class="o">+</span> <span class="s">"/api/v1/data/posts"</span>

<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">'Content-Type'</span><span class="p">:</span> <span class="s">'application/json'</span><span class="p">,</span>
    <span class="s">'X-AUTH-APIKEY'</span><span class="p">:</span> <span class="n">key</span><span class="p">,</span>
    <span class="s">'X-AUTH-SIGNATURE'</span><span class="p">:</span> <span class="n">signature</span>
<span class="p">}</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="n">post</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">data</span> <span class="o">=</span> <span class="n">json_body</span><span class="p">,</span> <span class="n">headers</span> <span class="o">=</span> <span class="n">headers</span><span class="p">)</span>
<span class="n">data</span> <span class="o">=</span> <span class="n">response</span><span class="p">.</span><span class="n">json</span><span class="p">()</span>
<span class="k">print</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code>
<span class="kd">const</span> <span class="nx">request</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">request</span><span class="dl">'</span><span class="p">)</span>
<span class="kd">const</span> <span class="nx">crypto</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">crypto</span><span class="dl">'</span><span class="p">)</span>


<span class="kd">const</span> <span class="nx">key</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx</span><span class="dl">"</span><span class="p">;</span>
<span class="kd">const</span> <span class="nx">secret</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx</span><span class="dl">"</span><span class="p">;</span>
<span class="kd">const</span> <span class="nx">base_url</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">https://staging.opigo.co.in/marketplace</span><span class="dl">"</span>

<span class="kd">const</span> <span class="nx">timeStamp</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">floor</span><span class="p">(</span><span class="nb">Date</span><span class="p">.</span><span class="nx">now</span><span class="p">());</span>

<span class="kd">const</span> <span class="nx">body</span> <span class="o">=</span> <span class="p">{</span>
  <span class="dl">"</span><span class="s2">timestamp</span><span class="dl">"</span><span class="p">:</span> <span class="nx">timeStamp</span>
<span class="p">}</span>

<span class="kd">const</span> <span class="nx">payload</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Buffer</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">body</span><span class="p">)).</span><span class="nx">toString</span><span class="p">();</span>
<span class="kd">const</span> <span class="nx">signature</span> <span class="o">=</span> <span class="nx">crypto</span><span class="p">.</span><span class="nx">createHmac</span><span class="p">(</span><span class="dl">'</span><span class="s1">sha256</span><span class="dl">'</span><span class="p">,</span> <span class="nx">secret</span><span class="p">).</span><span class="nx">update</span><span class="p">(</span><span class="nx">payload</span><span class="p">).</span><span class="nx">digest</span><span class="p">(</span><span class="dl">'</span><span class="s1">hex</span><span class="dl">'</span><span class="p">)</span>

<span class="kd">const</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">url</span><span class="p">:</span> <span class="nx">base_url</span> <span class="o">+</span> <span class="dl">"</span><span class="s2">/api/v1/data/posts</span><span class="dl">"</span><span class="p">,</span>
  <span class="na">headers</span><span class="p">:</span> <span class="p">{</span>
      <span class="dl">'</span><span class="s1">X-AUTH-APIKEY</span><span class="dl">'</span><span class="p">:</span> <span class="nx">key</span><span class="p">,</span>
      <span class="dl">'</span><span class="s1">X-AUTH-SIGNATURE</span><span class="dl">'</span><span class="p">:</span> <span class="nx">signature</span>
  <span class="p">},</span>
  <span class="na">json</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
  <span class="na">body</span><span class="p">:</span> <span class="nx">body</span>
<span class="p">}</span>

<span class="nx">request</span><span class="p">.</span><span class="nx">post</span><span class="p">(</span><span class="nx">options</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">error</span><span class="p">,</span> <span class="nx">response</span><span class="p">,</span> <span class="nx">body</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">body</span><span class="p">);</span>
<span class="p">});</span>
</code></pre></div>
<p>This endpoint retrieves all cards.</p>
<h3 id='http-request-6'>HTTP Request</h3>
<p><code>POST base_url + /api/v1/data/posts</code></p>
<h3 id='query-parameters-6'>Query Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>timestamp</td>
<td>true</td>
<td>You can&#39;t send the body empty</td>
</tr>
</tbody></table>

<aside class="success">
Remember — Please remember to send timestamp
</aside>
<h1 id='stocks'>Stocks</h1><h2 id='get-trending-stocks'>Get Trending Stocks</h2><div class="highlight"><pre class="highlight ruby tab-ruby"><code>
<span class="nb">require</span> <span class="s1">'json'</span>
<span class="nb">require</span> <span class="s1">'http'</span>
<span class="nb">require</span> <span class="s1">'openssl'</span>

<span class="n">secret</span> <span class="o">=</span> <span class="s2">"xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"</span>
<span class="n">key</span> <span class="o">=</span> <span class="s2">"xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"</span>
<span class="n">base_url</span> <span class="o">=</span> <span class="s2">"https://staging.opigo.co.in/marketplace"</span>

<span class="n">payload</span> <span class="o">=</span> <span class="p">{</span>
  <span class="s2">"timestamp"</span><span class="p">:</span> <span class="no">Time</span><span class="p">.</span><span class="nf">new</span><span class="p">.</span><span class="nf">to_i</span>
<span class="p">}</span>

<span class="n">signature</span> <span class="o">=</span> <span class="no">OpenSSL</span><span class="o">::</span><span class="no">HMAC</span><span class="p">.</span><span class="nf">hexdigest</span><span class="p">(</span><span class="no">OpenSSL</span><span class="o">::</span><span class="no">Digest</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="s1">'sha256'</span><span class="p">),</span> <span class="n">secret</span><span class="p">,</span> <span class="n">payload</span><span class="p">.</span><span class="nf">to_json</span><span class="p">)</span>

<span class="n">response</span> <span class="o">=</span> <span class="no">HTTP</span><span class="p">.</span><span class="nf">headers</span><span class="p">(</span><span class="s2">"Content-Type"</span><span class="o">=&gt;</span> <span class="s2">"Application/json"</span><span class="p">,</span> <span class="s2">"X-AUTH-APIKEY"</span> <span class="o">=&gt;</span> <span class="n">key</span><span class="p">,</span> <span class="s2">"X-AUTH-SIGNATURE"</span> <span class="o">=&gt;</span> <span class="n">signature</span><span class="p">).</span><span class="nf">post</span><span class="p">(</span><span class="s2">"</span><span class="si">#{</span><span class="n">base_url</span><span class="si">}</span><span class="s2">/api/v1/data/trending_stocks"</span><span class="p">,</span> <span class="ss">json: </span><span class="n">payload</span><span class="p">)</span>

<span class="n">response_body</span> <span class="o">=</span> <span class="no">JSON</span><span class="p">.</span><span class="nf">parse</span> <span class="n">response</span><span class="p">.</span><span class="nf">body</span>
</code></pre></div>
<blockquote>
<p>The above command returns JSON structured like this:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">[{</span><span class="nl">"expert_full_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Sandeep Maurya"</span><span class="p">,</span><span class="w"> </span><span class="nl">"caption"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w"> </span><span class="nl">"expert_view"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Bullish"</span><span class="p">,</span><span class="w"> </span><span class="nl">"timeframe"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Next 1 Week"</span><span class="p">,</span><span class="w"> </span><span class="nl">"potential_range"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Between 5% - 10%"</span><span class="p">,</span><span class="w"> </span><span class="nl">"stock_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"HDFCAMC - HDFCSENSEX"</span><span class="p">,</span><span class="w"> </span><span class="nl">"symbol_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"HDFCSENSEX"</span><span class="p">,</span><span class="w"> </span><span class="nl">"cost_price"</span><span class="p">:</span><span class="w"> </span><span class="s2">"714.51"</span><span class="p">,</span><span class="w"> </span><span class="nl">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"INR"</span><span class="p">,</span><span class="w"> </span><span class="nl">"card_status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"closed"</span><span class="p">,</span><span class="w"> </span><span class="nl">"overdue_status"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w"> </span><span class="nl">"ltp"</span><span class="p">:</span><span class="w"> </span><span class="s2">"777.0"</span><span class="p">,</span><span class="w"> </span><span class="nl">"ltp_timestamp"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="nl">"stock_split_id"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w"> </span><span class="nl">"highest_price_achieved"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.0"</span><span class="p">,</span><span class="w"> </span><span class="nl">"target_range_price"</span><span class="p">:</span><span class="w"> </span><span class="s2">"750.24"</span><span class="p">,</span><span class="w"> </span><span class="nl">"target_achieved_timestamp"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="nl">"pnl"</span><span class="p">:</span><span class="w"> </span><span class="s2">"62.49"</span><span class="p">,</span><span class="w"> </span><span class="nl">"pnl_percentage"</span><span class="p">:</span><span class="w"> </span><span class="s2">"8.74585"</span><span class="p">,</span><span class="w"> </span><span class="nl">"closing_price"</span><span class="p">:</span><span class="w"> </span><span class="s2">"777.0"</span><span class="p">,</span><span class="w"> </span><span class="nl">"closing_price_timestamp"</span><span class="p">:</span><span class="w"> </span><span class="mi">1704977779000</span><span class="p">,</span><span class="w"> </span><span class="nl">"creation_timestamp"</span><span class="p">:</span><span class="w"> </span><span class="mi">1704961716000</span><span class="p">,</span><span class="w"> </span><span class="nl">"updation_timestamp"</span><span class="p">:</span><span class="w"> </span><span class="mi">1704977779000</span><span class="p">}]</span><span class="w">
</span></code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code>
<span class="c1"># python3
</span>
<span class="kn">import</span> <span class="nn">hmac</span>
<span class="kn">import</span> <span class="nn">hashlib</span>
<span class="kn">import</span> <span class="nn">base64</span>
<span class="kn">import</span> <span class="nn">json</span>
<span class="kn">import</span> <span class="nn">time</span>
<span class="kn">import</span> <span class="nn">requests</span>

<span class="n">key</span> <span class="o">=</span> <span class="s">"xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"</span>
<span class="n">secret</span> <span class="o">=</span> <span class="s">"xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"</span>
<span class="n">base_url</span> <span class="o">=</span> <span class="s">"https://staging.opigo.co.in/marketplace"</span>


<span class="n">secret_bytes</span> <span class="o">=</span> <span class="nb">bytes</span><span class="p">(</span><span class="n">secret</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s">'utf-8'</span><span class="p">)</span>

<span class="n">timeStamp</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="nb">round</span><span class="p">(</span><span class="n">time</span><span class="p">.</span><span class="n">time</span><span class="p">()</span> <span class="o">*</span> <span class="mi">1000</span><span class="p">))</span>

<span class="n">body</span> <span class="o">=</span> <span class="p">{</span>
  <span class="s">"timestamp"</span><span class="p">:</span> <span class="n">timeStamp</span>
<span class="p">}</span>

<span class="n">json_body</span> <span class="o">=</span> <span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">body</span><span class="p">,</span> <span class="n">separators</span> <span class="o">=</span> <span class="p">(</span><span class="s">','</span><span class="p">,</span> <span class="s">':'</span><span class="p">))</span>

<span class="n">signature</span> <span class="o">=</span> <span class="n">hmac</span><span class="p">.</span><span class="n">new</span><span class="p">(</span><span class="n">secret_bytes</span><span class="p">,</span> <span class="n">json_body</span><span class="p">.</span><span class="n">encode</span><span class="p">(),</span> <span class="n">hashlib</span><span class="p">.</span><span class="n">sha256</span><span class="p">).</span><span class="n">hexdigest</span><span class="p">()</span>

<span class="n">url</span> <span class="o">=</span> <span class="n">base_url</span> <span class="o">+</span> <span class="s">"/api/v1/data/trending_stocks"</span>

<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">'Content-Type'</span><span class="p">:</span> <span class="s">'application/json'</span><span class="p">,</span>
    <span class="s">'X-AUTH-APIKEY'</span><span class="p">:</span> <span class="n">key</span><span class="p">,</span>
    <span class="s">'X-AUTH-SIGNATURE'</span><span class="p">:</span> <span class="n">signature</span>
<span class="p">}</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="n">post</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">data</span> <span class="o">=</span> <span class="n">json_body</span><span class="p">,</span> <span class="n">headers</span> <span class="o">=</span> <span class="n">headers</span><span class="p">)</span>
<span class="n">data</span> <span class="o">=</span> <span class="n">response</span><span class="p">.</span><span class="n">json</span><span class="p">()</span>
<span class="k">print</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code>
<span class="kd">const</span> <span class="nx">request</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">request</span><span class="dl">'</span><span class="p">)</span>
<span class="kd">const</span> <span class="nx">crypto</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">crypto</span><span class="dl">'</span><span class="p">)</span>


<span class="kd">const</span> <span class="nx">key</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx</span><span class="dl">"</span><span class="p">;</span>
<span class="kd">const</span> <span class="nx">secret</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx</span><span class="dl">"</span><span class="p">;</span>
<span class="kd">const</span> <span class="nx">base_url</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">https://staging.opigo.co.in/marketplace</span><span class="dl">"</span>

<span class="kd">const</span> <span class="nx">timeStamp</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">floor</span><span class="p">(</span><span class="nb">Date</span><span class="p">.</span><span class="nx">now</span><span class="p">());</span>

<span class="kd">const</span> <span class="nx">body</span> <span class="o">=</span> <span class="p">{</span>
  <span class="dl">"</span><span class="s2">timestamp</span><span class="dl">"</span><span class="p">:</span> <span class="nx">timeStamp</span>
<span class="p">}</span>

<span class="kd">const</span> <span class="nx">payload</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Buffer</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">body</span><span class="p">)).</span><span class="nx">toString</span><span class="p">();</span>
<span class="kd">const</span> <span class="nx">signature</span> <span class="o">=</span> <span class="nx">crypto</span><span class="p">.</span><span class="nx">createHmac</span><span class="p">(</span><span class="dl">'</span><span class="s1">sha256</span><span class="dl">'</span><span class="p">,</span> <span class="nx">secret</span><span class="p">).</span><span class="nx">update</span><span class="p">(</span><span class="nx">payload</span><span class="p">).</span><span class="nx">digest</span><span class="p">(</span><span class="dl">'</span><span class="s1">hex</span><span class="dl">'</span><span class="p">)</span>

<span class="kd">const</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">url</span><span class="p">:</span> <span class="nx">base_url</span> <span class="o">+</span> <span class="dl">"</span><span class="s2">/api/v1/data/trending_stocks</span><span class="dl">"</span><span class="p">,</span>
  <span class="na">headers</span><span class="p">:</span> <span class="p">{</span>
      <span class="dl">'</span><span class="s1">X-AUTH-APIKEY</span><span class="dl">'</span><span class="p">:</span> <span class="nx">key</span><span class="p">,</span>
      <span class="dl">'</span><span class="s1">X-AUTH-SIGNATURE</span><span class="dl">'</span><span class="p">:</span> <span class="nx">signature</span>
  <span class="p">},</span>
  <span class="na">json</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
  <span class="na">body</span><span class="p">:</span> <span class="nx">body</span>
<span class="p">}</span>

<span class="nx">request</span><span class="p">.</span><span class="nx">post</span><span class="p">(</span><span class="nx">options</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">error</span><span class="p">,</span> <span class="nx">response</span><span class="p">,</span> <span class="nx">body</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">body</span><span class="p">);</span>
<span class="p">});</span>
</code></pre></div>
<p>This endpoint retrieves trending stocks.</p>
<h3 id='http-request-7'>HTTP Request</h3>
<p><code>POST base_url + /api/v1/data/trending_stocks</code></p>
<h3 id='query-parameters-7'>Query Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>timestamp</td>
<td>true</td>
<td>You can&#39;t send the body empty</td>
</tr>
</tbody></table>

<aside class="success">
Remember — Please remember to send timestamp
</aside>

<hr>
<h1 id='errors'>Errors</h1>
<table><thead>
<tr>
<th>Code</th>
<th>Meaning</th>
</tr>
</thead><tbody>
<tr>
<td>400</td>
<td>Bad Request -- Your request is invalid.</td>
</tr>
<tr>
<td>401</td>
<td>Unauthorized -- Invalid Authorization X-AUTH-APIKEY or API Key and Secret is not active.</td>
</tr>
<tr>
<td>422</td>
<td>Invalid Request - Invalid Request Either data tempered or invalid signature or Subscription has been expired.</td>
</tr>
<tr>
<td>404</td>
<td>Not Found -- The specified link could not be found.</td>
</tr>
<tr>
<td>429</td>
<td>Too Many Requests -- You&#39;re making too many API calls</td>
</tr>
<tr>
<td>500</td>
<td>Internal Server Error -- We had a problem with our server. Try again later.</td>
</tr>
<tr>
<td>503</td>
<td>Service Unavailable -- We&#39;re temporarily offline for maintenance. Please try again later.</td>
</tr>
</tbody></table>

      </div>
      <div class="dark-box">
          <div class="lang-selector">
                <a href="#" data-language-name="ruby">ruby</a>
                <a href="#" data-language-name="python">python</a>
                <a href="#" data-language-name="javascript">javascript</a>
          </div>
      </div>
    </div>
  </body>
</html>
